# Wrangler configuration for FlockRL Backend Workers

name = "flockrl-api"
main = "src/index.ts"
compatibility_date = "2025-01-13"
compatibility_flags = ["nodejs_compat"]

# R2 bucket for storing submission files (.json only)
[[r2_buckets]]
binding = "SUBMISSIONS_BUCKET"
bucket_name = "flockrl-submissions"
preview_bucket_name = "flockrl-submissions-preview"

# KV namespace for storing submission metadata
[[kv_namespaces]]
binding = "SUBMISSIONS_KV"
id = "a9e239c970e94d7e9f394ff6f6550389"
preview_id = "592dca3e835f476294df33c64d54891d"

# Local development configuration
# Enables local R2 and KV emulators for testing
[dev]
local_protocol = "http"

[vars]
CORS_ORIGINS = "https://flockrl-webapp.pages.dev,https://flockrl.com,http://localhost:3000"